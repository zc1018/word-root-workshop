<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>闯关挑战 - 词根词缀记忆工坊</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4F46E5',
            secondary: '#818CF8',
            success: '#22C55E',
            background: '#EEF2FF',
            textMain: '#312E81'
          },
          fontFamily: {
            heading: ['Baloo 2', 'cursive'],
            body: ['Comic Neue', 'cursive']
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-background text-textMain min-h-screen font-body">

  <!-- 顶部导航 -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-white border-b-4 border-secondary">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="learn.html" class="flex items-center space-x-2 hover:opacity-80 transition-opacity">
        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        <span class="font-heading font-bold text-primary">返回学习</span>
      </a>

      <div class="flex items-center space-x-4">
        <div class="text-sm">
          <span class="text-textMain/60">关卡:</span>
          <span class="font-bold text-primary" id="currentStage">1-1</span>
        </div>
        <div class="text-sm">
          <span class="text-textMain/60">得分:</span>
          <span class="font-bold text-success" id="currentScore">0</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主内容 -->
  <main class="pt-24 pb-12 px-4 min-h-screen">
    <div class="max-w-4xl mx-auto">

      <!-- 关卡选择（初始页面） -->
      <div id="stageSelection" class="hidden">
        <h1 class="text-4xl md:text-5xl font-heading font-bold text-primary text-center mb-12">
          🎮 选择关卡
        </h1>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- 关卡 1: 初级 -->
          <div class="clay-card bg-white p-8 cursor-pointer" onclick="startChallenge(1)">
            <div class="text-5xl mb-4 text-center">🌱</div>
            <h2 class="text-2xl font-heading font-bold text-primary text-center mb-2">初级关卡</h2>
            <p class="text-textMain/80 text-center mb-4">掌握 10 个基础词根</p>
            <div class="text-center text-sm text-textMain/60">
              包含: spect, port, dict, scrib, vis
            </div>
          </div>

          <!-- 关卡 2: 中级 -->
          <div class="clay-card bg-white p-8 cursor-pointer opacity-50">
            <div class="text-5xl mb-4 text-center">🎯</div>
            <h2 class="text-2xl font-heading font-bold text-primary text-center mb-2">中级关卡</h2>
            <p class="text-textMain/80 text-center mb-4">掌握 20 个进阶词根</p>
            <div class="text-center text-sm text-red-500 font-bold">
              🔒 先完成初级关卡解锁
            </div>
          </div>

          <!-- 关卡 3: 高级 -->
          <div class="clay-card bg-white p-8 cursor-pointer opacity-50">
            <div class="text-5xl mb-4 text-center">💎</div>
            <h2 class="text-2xl font-heading font-bold text-primary text-center mb-2">高级关卡</h2>
            <p class="text-textMain/80 text-center mb-4">掌握 30 个高级词根</p>
            <div class="text-center text-sm text-red-500 font-bold">
              🔒 先完成中级关卡解锁
            </div>
          </div>

          <!-- 关卡 4: 大师 -->
          <div class="clay-card bg-white p-8 cursor-pointer opacity-50">
            <div class="text-5xl mb-4 text-center">👑</div>
            <h2 class="text-2xl font-heading font-bold text-primary text-center mb-2">大师关卡</h2>
            <p class="text-textMain/80 text-center mb-4">掌握 50 个大师词根</p>
            <div class="text-center text-sm text-red-500 font-bold">
              🔒 先完成高级关卡解锁
            </div>
          </div>
        </div>
      </div>

      <!-- 闯关中（题目页面） -->
      <div id="challengeGame">
        <!-- 进度条 -->
        <div class="clay-card bg-white p-4 mb-8">
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-bold">闯关进度</span>
            <span class="text-sm font-bold text-success" id="questionProgress">1/10</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-3">
            <div id="challengeProgressBar" class="bg-success h-3 rounded-full transition-all duration-300" style="width: 10%"></div>
          </div>
        </div>

        <!-- 题目卡片 -->
        <div class="clay-card bg-white p-8 md:p-12 mb-8">
          <h2 class="text-3xl font-heading font-bold text-primary text-center mb-8" id="challengeQuestion">
            下列哪个单词包含词根 "spect" (看)？
          </h2>

          <div class="space-y-4" id="challengeOptions">
            <!-- 动态生成 -->
          </div>

          <!-- 反馈 -->
          <div id="challengeFeedback" class="mt-6 hidden">
            <div id="challengeCorrect" class="hidden bg-success/20 border-4 border-success rounded-3xl p-4">
              <p class="text-success font-bold text-center text-lg">✅ 正确！+10 分</p>
            </div>
            <div id="challengeWrong" class="hidden bg-red-500/20 border-4 border-red-500 rounded-3xl p-4">
              <p class="text-red-600 font-bold text-center text-lg" id="challengeWrongMsg">❌ 答错了！</p>
            </div>
          </div>
        </div>

        <!-- 操作按钮 -->
        <div class="flex gap-4">
          <button id="nextQuestionBtn" class="clay-button bg-success text-white px-8 py-4 text-lg font-bold cursor-pointer border-green-600 flex-1 hidden">
            下一题 →
          </button>
          <button onclick="window.location.href='learn.html'" class="clay-button bg-secondary text-white px-8 py-4 text-lg font-bold cursor-pointer border-indigo-500">
            返回学习
          </button>
        </div>
      </div>

      <!-- 闯关结果 -->
      <div id="challengeResult" class="hidden">
        <div class="clay-card bg-white p-12 text-center">
          <div class="text-7xl mb-6" id="resultIcon">🎉</div>
          <h2 class="text-4xl font-heading font-bold text-primary mb-4" id="resultTitle">恭喜通关！</h2>
          <p class="text-xl text-textMain/80 mb-6" id="resultMessage">
            你答对了 <span class="text-success font-bold">8/10</span> 题
          </p>
          <div class="flex flex-col md:flex-row gap-4 max-w-md mx-auto">
            <button onclick="retryChallenge()" class="clay-button bg-secondary text-white px-8 py-4 text-lg font-bold cursor-pointer border-indigo-500 flex-1">
              重新挑战
            </button>
            <button onclick="nextStage()" class="clay-button bg-success text-white px-8 py-4 text-lg font-bold cursor-pointer border-green-600 flex-1">
              下一关
            </button>
          </div>
        </div>
      </div>

    </div>
  </main>

  <script src="js/storage.js"></script>
  <script src="js/wordData.js"></script>
  <script src="js/challenge.js"></script>

</body>
</html>
